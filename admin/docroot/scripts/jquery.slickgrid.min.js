function EventHelper(){return this.handlers=[],this.subscribe=function(e){this.handlers.push(e)},this.notify=function(e){for(var t=0;t<this.handlers.length;t++)this.handlers[t].call(this,e)},this}if(function(e){e.cookie=function(t,o,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(o))||null===o||void 0===o)){if(n=e.extend({},n),(null===o||void 0===o)&&(n.expires=-1),"number"==typeof n.expires){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}return o=String(o),document.cookie=[encodeURIComponent(t),"=",n.raw?o:encodeURIComponent(o),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=o||{};for(var l,s=n.raw?function(e){return e}:decodeURIComponent,a=document.cookie.split("; "),d=0;l=a[d]&&a[d].split("=");d++)if(s(l[0])===t)return s(l[1]||"");return null}}(jQuery),function(e){e.fn.drag=function(t,o,n){var r="string"==typeof t?t:"",i=e.isFunction(t)?t:e.isFunction(o)?o:null;return 0!==r.indexOf("drag")&&(r="drag"+r),n=(t==i?o:n)||{},i?this.bind(r,n,i):this.trigger(r)};var t=e.event,o=t.special,n=o.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",livekey:"livedrag",add:function(o){var r=e.data(this,n.datakey),i=o.data||{};r.related+=1,!r.live&&o.selector&&(r.live=!0,t.add(this,"draginit."+n.livekey,n.delegate)),e.each(n.defaults,function(e){void 0!==i[e]&&(r[e]=i[e])})},remove:function(){e.data(this,n.datakey).related-=1},setup:function(){if(!e.data(this,n.datakey)){var o=e.extend({related:0},n.defaults);e.data(this,n.datakey,o),t.add(this,"mousedown",n.init,o),this.attachEvent&&this.attachEvent("ondragstart",n.dontstart)}},teardown:function(){e.data(this,n.datakey).related||(e.removeData(this,n.datakey),t.remove(this,"mousedown",n.init),t.remove(this,"draginit",n.delegate),n.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",n.dontstart))},init:function(r){var i,l=r.data;return l.which>0&&r.which!=l.which||e(r.target).is(l.not)||l.handle&&!e(r.target).closest(l.handle,r.currentTarget).length||(l.propagates=1,l.interactions=[n.interaction(this,l)],l.target=r.target,l.pageX=r.pageX,l.pageY=r.pageY,l.dragging=null,i=n.hijack(r,"draginit",l),!l.propagates)?void 0:((i=n.flatten(i))&&i.length&&(l.interactions=[],e.each(i,function(){l.interactions.push(n.interaction(this,l))})),l.propagates=l.interactions.length,l.drop!==!1&&o.drop&&o.drop.handler(r,l),n.textselect(!1),t.add(document,"mousemove mouseup",n.handler,l),!1)},interaction:function(t,o){return{drag:t,callback:new n.callback,droppable:[],offset:e(t)[o.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(e){var r=e.data;switch(e.type){case!r.dragging&&"mousemove":if(Math.pow(e.pageX-r.pageX,2)+Math.pow(e.pageY-r.pageY,2)<Math.pow(r.distance,2))break;e.target=r.target,n.hijack(e,"dragstart",r),r.propagates&&(r.dragging=!0);case"mousemove":if(r.dragging){if(n.hijack(e,"drag",r),r.propagates){r.drop!==!1&&o.drop&&o.drop.handler(e,r);break}e.type="mouseup"}case"mouseup":t.remove(document,"mousemove mouseup",n.handler),r.dragging&&(r.drop!==!1&&o.drop&&o.drop.handler(e,r),n.hijack(e,"dragend",r)),n.textselect(!0),r.click===!1&&r.dragging&&(jQuery.event.triggered=!0,setTimeout(function(){jQuery.event.triggered=!1},20),r.dragging=!1)}},delegate:function(o){var r,i=[],l=e.data(this,"events")||{};return e.each(l.live||[],function(l,s){0===s.preType.indexOf("drag")&&(r=e(o.target).closest(s.selector,o.currentTarget)[0])&&(t.add(r,s.origType+"."+n.livekey,s.origHandler,s.data),e.inArray(r,i)<0&&i.push(r))}),i.length?e(i).bind("dragend."+n.livekey,function(){t.remove(this,"."+n.livekey)}):!1},hijack:function(o,r,i,l,s){if(i){var a,d,c,u={event:o.originalEvent,type:o.type},h=r.indexOf("drop")?"drag":"drop",p=l||0;l=isNaN(l)?i.interactions.length:l,o.type=r,o.originalEvent=null,i.results=[];do(d=i.interactions[p])&&("dragend"!==r&&d.cancelled||(c=n.properties(o,i,d),d.results=[],e(s||d[h]||i.droppable).each(function(l,s){return a=(c.target=s)?t.handle.call(s,o,c):null,a===!1?("drag"==h&&(d.cancelled=!0,i.propagates-=1),"drop"==r&&(d[h][l]=null)):"dropinit"==r&&d.droppable.push(n.element(a)||s),"dragstart"==r&&(d.proxy=e(n.element(a)||d.drag)[0]),d.results.push(a),delete o.result,"dropinit"!==r?a:void 0}),i.results[p]=n.flatten(d.results),"dropinit"==r&&(d.droppable=n.flatten(d.droppable)),"dragstart"==r&&!d.cancelled&&c.update()));while(++p<l);return o.type=u.type,o.originalEvent=u.event,n.flatten(i.results)}},properties:function(e,t,o){var r=o.callback;return r.drag=o.drag,r.proxy=o.proxy||o.drag,r.startX=t.pageX,r.startY=t.pageY,r.deltaX=e.pageX-t.pageX,r.deltaY=e.pageY-t.pageY,r.originalX=o.offset.left,r.originalY=o.offset.top,r.offsetX=e.pageX-(t.pageX-r.originalX),r.offsetY=e.pageY-(t.pageY-r.originalY),r.drop=n.flatten((o.drop||[]).slice()),r.available=n.flatten((o.droppable||[]).slice()),r},element:function(e){return e&&(e.jquery||1==e.nodeType)?e:void 0},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?n.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",n.dontstart).attr("unselectable",t?"off":"on").css("MozUserSelect",t?"":"none")},dontstart:function(){return!1},callback:function(){}};n.callback.prototype={update:function(){o.drop&&this.available.length&&e.each(this.available,function(e){o.drop.locate(this,e)})}},o.draginit=o.dragstart=o.dragend=n}(jQuery),function(e){function t(){function t(){M=!0}function o(){M=!1,$()}function n(){T={},e.each(H,function(e,t){if(void 0!=t){if(t._id instanceof Object)var o=t._id.$id;else var o=t._id;if(void 0==o||void 0!=T[o])throw window.console&&console.log(t),window.console&&console.log(o),"Each data element must implement a unique 'id' property or the 'id' is 0";T[o]=e}})}function r(){return A}function l(t){A=t,e(A).form(function(t){server_page_num=0,server_page_size=0,t.pagination&&(server_page_num=parseInt(t.pagination.page)-1,server_page_size=parseInt(t.pagination.items_per_page),parseInt(t.pagination.total_rows)!=O&&(H={},O=parseInt(t.pagination.total_rows)),q.notify(c())),offset=parseInt(server_page_size)*parseInt(server_page_num),t.entries&&e.each(t.entries,function(e,t){H[offset+e]=t}),n(),o(),K.notify({from:offset,to:offset+F})},{keep_form:!0})}function s(){return H}function a(e,t){void 0!==t&&(D=t),H=e,n(),$()}function d(e){void 0!=e.pageSize&&(F=e.pageSize),void 0!=e.totalRows&&(O=e.totalRows),void 0!=e.pageNum&&(V=Math.min(e.pageNum,Math.ceil(O/F))),q.notify(c()),$()}function c(){return{pageSize:F,pageNum:V,totalRows:O}}function u(t,o){_form=r(),e("input[name=sort]",_form).val(t),o===!1?e("input[name=sord]",_form).val("DESC"):e("input[name=sord]",_form).val("ASC"),E()}function h(e,t){return u(e,t)}function p(){z?u(z,N):G&&h(G,N)}function f(e){P=e,$()}function g(e){return H[e]}function m(e){return T[e]}function v(e){if(!L){L={};for(var t=0,o=I.length;o>t;++t)L[I[t][D]]=t}return L[e]}function C(e){return H[T[e]]}function w(e,t){if(void 0===T[e]||e!==t[D])throw"Invalid or non-matching id";H[T[e]]=t,W||(W={}),W[e]=!0,$()}function R(e,t){H.splice(e,0,t),n(),$()}function b(e){H.push(e),n(),$()}function y(t,o){e.each(o,function(e){H.splice(t+e,0,this)}),n(),$()}function k(e){if(void 0===T[e])throw"Invalid id";H.splice(T[e],1),n(),$()}function S(t,o,n,r){var i=[],l=t,s=o,a=n,d=r;L=null;var c,u=s.length,h=0,p=0;return e.each(l,function(e,t){h=e,c=t.id,(!a||a(t))&&(!F||h>=F*V&&F*(V+1)>h)&&((p>=u||c!=s[p][D]||d&&d[c])&&(i[i.length]=p),s[p]=t,p++)}),u>p&&s.splice(p,u-p),i}function $(){if(!M){if(!x())return t(),E(),!1;var e=I.length,o=O,n=S(H,I,P,W);F&&V*F>O&&(V=Math.floor(O/F),n=S(H,I,P,W)),W=null,o!=O&&q.notify(c()),e!=I.length&&B.notify({previous:e,current:I.length}),n.length>0&&j.notify(n)}}function x(){for(offset=parseInt(F)*parseInt(V),i=offset;i<offset+parseInt(F);i++)if(i<O&&(void 0==H[i]||null==H[i]))return!1;return!0}function E(){_form=r(),offset=parseInt(F)*parseInt(V),items_per_page=e("input[name=items_per_page]",_form).val(),server_page=parseInt(offset/parseInt(items_per_page)),e("input[name=page]",_form).val(server_page+1),null!=_&&clearTimeout(_),_=setTimeout(function(){X.notify({from:offset,to:offset+items_per_page}),r().trigger("submit")},50)}var D="_id",H={},I=[],T={},L=null,P=null,W=null,M=!1,N=!0,z=null,G=null,A=null,_=null,F=0,V=0,O=0,B=new EventHelper,j=new EventHelper,q=new EventHelper,X=new EventHelper,K=new EventHelper;return{rows:I,beginUpdate:t,endUpdate:o,setPagingOptions:d,getPagingInfo:c,getItems:s,setItems:a,setFilter:f,sort:u,fastSort:h,reSort:p,getIdxById:m,getRowById:v,getItemById:C,getItemByIdx:g,refresh:$,updateItem:w,insertItem:R,insertItems:y,addItem:b,deleteItem:k,setForm:l,onRowCountChanged:B,onRowsChanged:j,onPagingInfoChanged:q,onDataLoading:X,onDataLoaded:K}}e.extend(!0,window,{Slick:{Data:{DataView:t}}})}(jQuery),function(e){function t(t,o,n){function r(){t.onPagingInfoChanged.subscribe(function(e){h(e)}),u(),h(t.getPagingInfo())}function i(){var e=!Slick.GlobalEditorLock.commitCurrentEdit(),o=t.getPagingInfo(),n=Math.floor(o.totalRows/o.pageSize);return{canGotoFirst:!e&&0!=o.pageSize&&o.pageNum>0,canGotoLast:!e&&0!=o.pageSize&&o.pageNum!=n,canGotoPrev:!e&&0!=o.pageSize&&o.pageNum>0,canGotoNext:!e&&0!=o.pageSize&&o.pageNum<n,pagingInfo:o,lastPage:n}}function l(e){t.setPagingOptions({pageSize:e})}function s(){i().canGotoFirst&&t.setPagingOptions({pageNum:0})}function a(){var e=i();e.canGotoLast&&t.setPagingOptions({pageNum:e.lastPage})}function d(){var e=i();e.canGotoPrev&&t.setPagingOptions({pageNum:e.pagingInfo.pageNum-1})}function c(){var e=i();e.canGotoNext&&t.setPagingOptions({pageNum:e.pagingInfo.pageNum+1})}function u(){n.empty(),p=e("<span class='slick-pager-status' />").appendTo(n);var t=e("<span class='slick-pager-nav btn-group' role='group' />").appendTo(n),r=e("<span class='slick-pager-settings' />").appendTo(n);r.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data='20'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a><a data=500>500</a></span>"),r.find("a[data]").click(function(t){var n=e(t.target).attr("data");if(void 0!=n)if(-1==n){var r=o.getViewport();l(r.bottom-r.top)}else l(parseInt(n))});var i="<button href='#' class='btn btn-sm btn-default'><span class='glyphicon ",u="'></span></button>";e(i+"glyphicon-list-alt"+u).click(function(){e(this).siblings(".slick-pager-settings-expanded").toggle()}).appendTo(r),e(i+"glyphicon-step-backward"+u).click(s).appendTo(t),e(i+"glyphicon-backward"+u).click(d).appendTo(t),e(i+"glyphicon-forward"+u).click(c).appendTo(t),e(i+"glyphicon-step-forward"+u).click(a).appendTo(t),n.children().wrapAll("<div class='slick-pager' />")}function h(t){var o=i();if(n.find(".slick-pager-nav span").parent().removeAttr("disabled"),o.canGotoFirst||n.find(".glyphicon-step-backward").parent().attr("disabled","disabled"),o.canGotoLast||n.find(".glyphicon-step-forward").parent().attr("disabled","disabled"),o.canGotoNext||n.find(".glyphicon-forward").parent().attr("disabled","disabled"),o.canGotoPrev||n.find(".glyphicon-backward").parent().attr("disabled","disabled"),0==t.pageSize)p.text("Viewing all "+t.totalRows+" rows");else{var r=0,l=0;t.totalRows>0&&(r=t.pageNum*t.pageSize,l=r+t.pageSize,l>t.totalRows&&(l=t.totalRows),r+=1),p.text("viewing rows "+e.formatNumber(r,{format:"#,##0",locale:"us"})+" - "+e.formatNumber(l,{format:"#,##0",locale:"us"})+" of "+e.formatNumber(t.totalRows,{format:"#,##0",locale:"us"})+" (page "+e.formatNumber(t.pageNum+1,{format:"#,##0",locale:"us"})+" of "+e.formatNumber(Math.floor(t.totalRows/t.pageSize)+1,{format:"#,##0",locale:"us"})+")")}}var p;r()}e.extend(!0,window,{Slick:{Controls:{Pager:t}}})}(jQuery),function(e){function t(t,o){function n(){o.onHeaderContextMenu=r,l=e("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;max-height:500px;overflow-y:scroll;' />").appendTo(document.body),l.bind("mouseleave",function(t){e(this).fadeOut()}),l.bind("click",i)}function r(n){l.empty();for(var r,i,s=(o.getColumns(),0);s<t.length;s++)t[s].permanent||(r=e("<li />").appendTo(l),i=e("<input type='checkbox' />").attr("id","columnpicker_"+s).attr("rel",t[s].id).data("id",t[s].id).appendTo(r),null!=o.getColumnIndex(t[s].id)&&i.prop("checked","checked"),e("<label for='columnpicker_"+s+"' />").text(t[s].name).appendTo(r));e("<hr/>").appendTo(l),r=e("<li />").appendTo(l),i=e("<input type='checkbox' id='autoresize' />").appendTo(r),e("<label for='autoresize'>Force Fit Columns</label>").appendTo(r),o.getOptions().forceFitColumns&&i.prop("checked","checked"),l.css("top",n.pageY-10).css("left",n.pageX-10).fadeIn()}function i(n){if("autoresize"==n.target.id)return void(n.target.checked?(o.setOptions({forceFitColumns:!0}),o.autosizeColumns()):o.setOptions({forceFitColumns:!1}));if(e(n.target).is(":checkbox")){if(0==l.find(":checkbox:checked").length)return void e(n.target).attr("checked","checked");var r=[],i=o.getColumns(),s=l.find(":checkbox[id^=columnpicker]");e.each(i,function(){var e=s.filter("[rel="+this.id+"]");(this.permanent||e.is(":checked"))&&(r.push(this),e.removeAttr("checked"))}),s.filter(":checked").each(function(){var o=e(this);e.each(t,function(){o.attr("rel")==this.id&&r.push(this)})}),e.each(r,function(){s.filter("[rel="+this.id+"]").prop("checked","checked")}),o.setColumns(r),o.onColumnsSelected&&o.onColumnsSelected()}}var l;n()}e.extend(!0,window,{Slick:{Controls:{ColumnPicker:t}}})}(jQuery),"undefined"==typeof jQuery)throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");!function($){function EditorLock(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return e?e.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return e?e.cancelCurrentEdit():!0}}function SlickGrid($container,data,columns,options){function init(){if(gridData=data,gridDataGetLength=gridData.getLength||defaultGetLength,gridDataGetItem=gridData.getItem||defaultGetItem,maxSupportedCssHeight=getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),columnDefaults.width=options.defaultColumnWidth,options.enableColumnReorder&&!$.fn.sortable)throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');switch(editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().attr("tabIndex",0).attr("hideFocus",!0).css("clear","both").css("outline",0).addClass(uid),$container.css("position")){case"absolute":case"relative":case"fixed":break;default:$container.css("position","relative")}$headerScroller=$("<div class='slick-header panel-footer text-muted' style='overflow:hidden;position:relative;padding:0px;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo($headerScroller),!options.showSecondaryHeaderRow,$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;outline:0;position:relative;'>").appendTo($container),$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport),measureCellPaddingAndBorder(),$viewport.height($container.innerHeight()-$headerScroller.outerHeight()-(options.showSecondaryHeaderRow?$secondaryHeaderScroller.outerHeight():0)),disableSelection($headers),createColumnHeaders(),setupColumnSort(),setupDragEvents(),createCssRules(),resizeAndRender(),bindAncestorScrollEvents(),$viewport.bind("scroll",handleScroll),$container.bind("resize",resizeAndRender),$container.parent().bind("resize",resizeAndRender),$canvas.bind("keydown",handleKeyDown),$canvas.bind("click",handleClick),$canvas.bind("dblclick",handleDblClick),$canvas.bind("contextmenu",handleContextMenu),$canvas.bind("mouseover",handleHover),$headerScroller.bind("contextmenu",handleHeaderContextMenu),$headerScroller.bind("click",handleHeaderClick)}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function setCanvasWidth(e){$canvas.width(e),viewportHasHScroll=e>viewportW-scrollbarDimensions.width}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function defaultGetLength(){return gridData.length}function defaultGetItem(e){return gridData[e]}function getMaxSupportedCssHeight(){for(var e=1e6,t=0,o=5e6,n=$("<div style='display:none' />").appendTo(document.body);o>=t&&(n.css("height",t+e),n.height()===t+e);)t+=e;return n.remove(),t}function bindAncestorScrollEvents(){for(var e=$canvas[0];(e=e.parentNode)!=document.body;)(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight)&&$(e).bind("scroll.slickgrid",handleCurrentCellPositionChange)}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function createColumnHeaders(){function e(){}function t(){}var o;for($headers.empty(),columnsById={},o=0;o<columns.length;o++){var n=columns[o]=$.extend({},columnDefaults,columns[o]);columnsById[n.id]=o;var r=$("<div class='panel-heading slick-header-column' id='"+uid+n.id+"' />").html("<span class='slick-column-name'>"+n.name+"</span>").width(n.width-headerColumnWidthDiff).attr("title",n.toolTip||n.name||"").data("fieldId",n.id).appendTo($headers);(options.enableColumnReorder||n.sortable)&&r.hover(e,t),n.sortable&&r.append("<span class='slick-sort-indicator' />")}setSortColumn(sortColumnId,sortAsc),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){if(!$(e.target).hasClass("slick-resizable-handle")&&self.onSort){var t=$(e.target).closest(".slick-header-column");if(!t.length)return;var o=columns[getSiblingIndex(t[0])];if(o.sortable){if(!options.editorLock.commitCurrentEdit())return;o.id===sortColumnId?sortAsc=!sortAsc:(sortColumnId=o.id,sortAsc=!0),setSortColumn(sortColumnId,sortAsc),self.onSort(o,sortAsc)}}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder panel-heading slick-header-column",forcePlaceholderSize:!0,start:function(e,t){$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(!options.editorLock.commitCurrentEdit())return void $(this).sortable("cancel");for(var t=$headers.sortable("toArray"),o=[],n=0;n<t.length;n++)o.push(columns[getColumnIndex(t[n].replace(uid,""))]);setColumns(o),self.onColumnsReordered&&self.onColumnsReordered(),e.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var e,t,o,n,r,i,l,s,a,d;r=$headers.children(),r.find(".slick-resizable-handle").remove(),r.each(function(e,t){columns[e].resizable&&(void 0===s&&(s=e),a=e)}),r.each(function(c,u){void 0!==s&&s>c||options.forceFitColumns&&c>=a||(e=$(u),$("<div class='slick-resizable-handle' />").appendTo(u).bind("dragstart",function(e,s){if(!options.editorLock.commitCurrentEdit())return!1;n=e.pageX,$(this).parent().addClass("slick-header-column-active");var a=null,u=null;if(r.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()}),options.forceFitColumns)for(a=0,u=0,t=c+1;t<r.length;t++)o=columns[t],o.resizable&&(null!==u&&(o.maxWidth?u+=o.maxWidth-o.previousWidth:u=null),a+=o.previousWidth-Math.max(o.minWidth||0,absoluteColumnMinWidth));var h=0,p=0;for(t=0;c>=t;t++)o=columns[t],o.resizable&&(null!==p&&(o.maxWidth?p+=o.maxWidth-o.previousWidth:p=null),h+=o.previousWidth-Math.max(o.minWidth||0,absoluteColumnMinWidth));null===a&&(a=1e5),null===h&&(h=1e5),null===u&&(u=1e5),null===p&&(p=1e5),l=n+Math.min(a,p),i=n-Math.min(h,u),d=$canvas.width()}).bind("drag",function(e,s){var a,u,h=Math.min(l,Math.max(i,e.pageX))-n;if(0>h){for(u=h,t=c;t>=0;t--)o=columns[t],o.resizable&&(a=Math.max(o.minWidth||0,absoluteColumnMinWidth),u&&o.previousWidth+u<a?(u+=o.previousWidth-a,styleColumnWidth(t,a,options.syncColumnCellResize)):(styleColumnWidth(t,o.previousWidth+u,options.syncColumnCellResize),u=0));if(options.forceFitColumns)for(u=-h,t=c+1;t<r.length;t++)o=columns[t],o.resizable&&(u&&o.maxWidth&&o.maxWidth-o.previousWidth<u?(u-=o.maxWidth-o.previousWidth,styleColumnWidth(t,o.maxWidth,options.syncColumnCellResize)):(styleColumnWidth(t,o.previousWidth+u,options.syncColumnCellResize),u=0));else options.syncColumnCellResize&&setCanvasWidth(d+h)}else{for(u=h,t=c;t>=0;t--)o=columns[t],o.resizable&&(u&&o.maxWidth&&o.maxWidth-o.previousWidth<u?(u-=o.maxWidth-o.previousWidth,styleColumnWidth(t,o.maxWidth,options.syncColumnCellResize)):(styleColumnWidth(t,o.previousWidth+u,options.syncColumnCellResize),u=0));if(options.forceFitColumns)for(u=-h,t=c+1;t<r.length;t++)o=columns[t],o.resizable&&(a=Math.max(o.minWidth||0,absoluteColumnMinWidth),u&&o.previousWidth+u<a?(u+=o.previousWidth-a,styleColumnWidth(t,a,options.syncColumnCellResize)):(styleColumnWidth(t,o.previousWidth+u,options.syncColumnCellResize),u=0));else options.syncColumnCellResize&&setCanvasWidth(d+h)}}).bind("dragend",function(e,n){var i;for($(this).parent().removeClass("slick-header-column-active"),t=0;t<r.length;t++)o=columns[t],i=$(r[t]).outerWidth(),o.previousWidth!==i&&o.rerenderOnResize&&removeAllRows(),options.forceFitColumns?o.width=Math.floor(o.width*(i-o.previousWidth)/o.previousWidth)+o.width:o.width=i,options.syncColumnCellResize||o.previousWidth===i||styleColumnWidth(t,i,!0);resizeCanvas(),self.onColumnsResized&&self.onColumnsResized()}))})}function setupDragEvents(){function e(e){var t=Math.min(e.start.row,e.end.row),o=Math.min(e.start.cell,e.end.cell),n=Math.max(e.start.row,e.end.row),r=Math.max(e.start.cell,e.end.cell);return{start:{row:t,cell:o},end:{row:n,cell:r}}}var t=1,o=2;$canvas.bind("draginit",function(e,n){var r=$(e.target).closest(".slick-cell");if(0===r.length)return!1;if(parseInt(r.parent().attr("row"),10)>=gridDataGetLength())return!1;var i=columns[getSiblingIndex(r[0])];if("move"==i.behavior||"selectAndMove"==i.behavior)n.mode=t;else{if(!options.enableCellRangeSelection)return!1;n.mode=o}}).bind("dragstart",function(e,n){if(!options.editorLock.commitCurrentEdit())return!1;var r=parseInt($(e.target).closest(".slick-row").attr("row"),10);if(n.mode==t&&(selectedRowsLookup[r]||setSelectedRows([r]),n.selectionProxy=$("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",$(this).innerWidth()).css("height",options.rowHeight*selectedRows.length).appendTo($viewport),n.guide=$("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",$(this).innerWidth()).css("top",-1e3).appendTo($viewport),n.insertBefore=-1),n.mode==o){var i=getCellFromPoint(n.startX-$canvas.offset().left,n.startY-$canvas.offset().top);return cellExists(i.row,i.cell)?(n.range={start:i,end:{}},$("<div class='slick-selection'></div>").appendTo($canvas)):!1}}).bind("drag",function(n,r){if(r.mode==t){var i=n.clientY-$(this).offset().top;r.selectionProxy.css("top",i-5);var l=Math.max(0,Math.min(Math.round(i/options.rowHeight),gridDataGetLength()));l!==r.insertBefore&&(self.onBeforeMoveRows&&self.onBeforeMoveRows(getSelectedRows(),l)===!1?(r.guide.css("top",-1e3),r.canMove=!1):(r.guide.css("top",l*options.rowHeight),r.canMove=!0),r.insertBefore=l)}if(r.mode==o){var s=getCellFromPoint(n.clientX-$canvas.offset().left,n.clientY-$canvas.offset().top);if(!cellExists(s.row,s.cell))return;r.range.end=s;var a=e(r.range),d=getCellNodeBox(a.start.row,a.start.cell),c=getCellNodeBox(a.end.row,a.end.cell);$(r.proxy).css({top:d.top,left:d.left,height:c.bottom-d.top-2,width:c.right-d.left-2})}}).bind("dragend",function(n,r){r.mode==t&&(r.guide.remove(),r.selectionProxy.remove(),self.onMoveRows&&r.canMove&&self.onMoveRows(getSelectedRows(),r.insertBefore)),r.mode==o&&($(r.proxy).remove(),self.onCellRangeSelected&&self.onCellRangeSelected(e(r.range)))})}function measureCellPaddingAndBorder(){var e=$("<div class='panel-heading slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=e.outerWidth()-e.width(),headerColumnHeightDiff=e.outerHeight()-e.height(),e.remove();var t=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(t),cellWidthDiff=e.outerWidth()-e.width(),cellHeightDiff=e.outerHeight()-e.height(),t.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 10000px; }","."+uid+" .slick-cell { height:"+e+"px; line-height:"+e+"px; }"],o=0;o<columns.length;o++)t.push("."+uid+" .c"+o+" { width:"+((columns[o].currentWidth||columns[o].width)-cellWidthDiff)+"px;  } ");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(""):$style[0].appendChild(document.createTextNode(t.join(" ")));for(var n=document.styleSheets,o=0;o<n.length;o++)if((n[o].ownerNode||n[o].owningElement)==$style[0]){stylesheet=n[o];break}}function findCssRule(e){for(var t=stylesheet.cssRules||stylesheet.rules,o=0;o<t.length;o++)if(t[o].selectorText==e)return t[o];return null}function findCssRuleForCell(e){return findCssRule("."+uid+" .c"+e)}function removeCssRules(){$style.remove()}function destroy(){options.editorLock.cancelCurrentEdit(),self.onBeforeDestroy&&self.onBeforeDestroy(),$headers.sortable&&$headers.sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind("resize",resizeCanvas),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,o=[],n=0,r=options.autoHeight?viewportW:viewportW-scrollbarDimensions.width,i=0,l=0;for(e=0;e<columns.length;e++)t=columns[e],o.push(parseInt(t.width)),l+=parseInt(t.width),n+=parseInt(t.width)-Math.max(t.minWidth||0,absoluteColumnMinWidth);for(i=l,removeAllRows();i>r;){if(!n)return;var s=(i-r)/n;for(e=0;e<columns.length&&i>r;e++)if(t=columns[e],t.resizable&&t.minWidth!==t.width&&t.width!==absoluteColumnMinWidth){var a=Math.floor(s*(t.width-Math.max(t.minWidth||0,absoluteColumnMinWidth)))||1;i-=a,o[e]-=a}}for(var d=i;r>i;){var c=r/i;for(e=0;e<columns.length&&r>i;e++)if(t=columns[e],t.resizable&&!(t.maxWidth<=t.width)){var u=Math.min(Math.floor(c*t.width)-t.width,t.maxWidth-t.width||1e6)||1;i+=u,o[e]+=u}if(d==i)break;d=i}for(e=0;e<columns.length;e++)styleColumnWidth(e,columns[e].currentWidth=o[e],!0);resizeCanvas()}function styleColumnWidth(e,t,o){columns[e].currentWidth=t,$headers.children().eq(e).css("width",t-headerColumnWidthDiff),o&&(findCssRuleForCell(e).style.width=t-cellWidthDiff+"px")}function setSortColumn(e,t){sortColumnId=e,sortAsc=t;var o=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted"),$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),null!=o&&$headers.children().eq(o).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}function getSortInfo(){return{sortColumnId:sortColumnId,sortAsc:sortAsc}}function getSelectedRows(){return selectedRows.concat()}function setSelectedRows(e){var t,o,n={};for(t=0;t<e.length;t++)n[e[t]]=!0;for(t=0;t<selectedRows.length;t++)o=selectedRows[t],rowsCache[o]&&!n[o]&&$(rowsCache[o]).removeClass("ui-state-active selected");for(t=0;t<e.length;t++)o=e[t],rowsCache[o]&&!selectedRowsLookup[o]&&$(rowsCache[o]).addClass("ui-state-active selected");selectedRows=e.concat(),selectedRowsLookup=n}function getColumns(){return columns}function setColumns(e){columns=e,removeAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeAndRender(),handleScroll()}function getOption(e){return options[e]}function getOptions(){return options}function setOptions(e){options.editorLock.commitCurrentEdit()&&(makeSelectedCellNormal(),options.enableAddRow!==e.enableAddRow&&removeRow(gridDataGetLength()),options=$.extend(options,e),render())}function setData(e,t){removeAllRows(),data=e,gridData=data,gridDataGetLength=gridData.getLength||defaultGetLength,gridDataGetItem=gridData.getItem||defaultGetItem,t&&scrollTo(0)}function getSecondaryHeaderRow(){return $secondaryHeaders[0]}function showSecondaryHeaderRow(){options.showSecondaryHeaderRow=!0,$secondaryHeaderScroller.slideDown("fast",resizeCanvas)}function hideSecondaryHeaderRow(){options.showSecondaryHeaderRow=!1,$secondaryHeaderScroller.slideUp("fast",resizeCanvas)}function scrollTo(e){var t=offset;page=Math.min(n-1,Math.floor(e/ph)),offset=Math.round(page*cj);var o=e-offset;if(offset!=t){var r=getVisibleRange(o);cleanupRows(r.top,r.bottom),updateRowPositions()}prevScrollTop!=o&&(scrollDir=o+offset>prevScrollTop+t?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=o,self.onViewportChanged&&self.onViewportChanged())}function defaultFormatter(e,t,o,n,r){return null===o||void 0===o?"":o}function getFormatter(e){return e.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(e)||defaultFormatter}function getEditor(e){return e.editor||options.editorFactory&&options.editorFactory.getEditor(e)}function appendRowHtml(e,t){var o,n=gridDataGetItem(t),r=t<gridDataGetLength()&&!n,i="slick-row "+(r?" loading":"")+(selectedRowsLookup[t]?" selected ui-state-active":"")+(t%2==1?" odd":" even");options.rowCssClasses&&(i+=" "+options.rowCssClasses(n)),e.push("<div class=' "+i+"' row='"+t+"' style='top:"+(options.rowHeight*t-offset)+"px'>");for(var l=0,s=columns.length;s>l;l++){var a=columns[l];if(o="slick-cell c"+l+(a.cssClass?" "+a.cssClass:""),highlightedCells&&highlightedCells[t]&&highlightedCells[t][a.id]&&(o+=" "+options.cellHighlightCssClass),a.editor&&(o+=" editable-cell"),e.push("<div class='"+o+"'>"),n)if(-1==a.field.indexOf("."))e.push(getFormatter(a)(t,l,n[a.field],a,n));else{var d=function(e,t){path=t.split(".");for(var o=e,n=0;n<path.length;n++)o=o[path[n]];return o};e.push(getFormatter(a)(t,l,d(n,a.field),a,n))}e.push("</div>")}e.push("</div>")}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==currentRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),removeAllRows(),render()}function removeAllRows(){currentEditor&&makeSelectedCellNormal(),$canvas[0].innerHTML="",rowsCache={},postProcessedRows={},counter_rows_removed+=renderedRows,renderedRows=0}function removeRowFromCache(e){var t=rowsCache[e];t&&($canvas[0].removeChild(t),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++)}function removeRows(e){var t,o,n;if(e&&e.length){scrollDir=0;var r=[];for(t=0,o=e.length;o>t;t++)currentEditor&&currentRow===t&&makeSelectedCellNormal(),rowsCache[e[t]]&&r.push(e[t]);if(renderedRows>10&&r.length===renderedRows)removeAllRows();else for(t=0,n=r.length;n>t;t++)removeRowFromCache(r[t])}}function removeRow(e){removeRows([e])}function updateCell(e,t){if(rowsCache[e]){
var o=$(rowsCache[e]).children().eq(t);if(0!==o.length){var n=columns[t],r=gridDataGetItem(e);currentEditor&&currentRow===e&&currentCell===t?currentEditor.loadValue(r):(o[0].innerHTML=r?getFormatter(n)(e,t,r[n.field],n,r):"",invalidatePostProcessingResults(e))}}}function updateRow(e){rowsCache[e]&&($(rowsCache[e]).children().each(function(t){var o=columns[t];e===currentRow&&t===currentCell&&currentEditor?currentEditor.loadValue(gridDataGetItem(currentRow)):gridDataGetItem(e)?this.innerHTML=getFormatter(o)(e,t,gridDataGetItem(e)[o.field],o,gridDataGetItem(e)):this.innerHTML=""}),invalidatePostProcessingResults(e))}function resizeCanvas(){var e=0;$headers.find(".slick-header-column").each(function(){e+=$(this).outerWidth()});var t=options.rowHeight*(gridDataGetLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0));viewportW=$viewport.innerWidth(),options.autoHeight?e>viewportW&&!options.forceFitColumns?$viewport.height(t+scrollbarDimensions.height):$viewport.height(t):$viewport.height($container.innerHeight()-$headerScroller.outerHeight()-(options.showSecondaryHeaderRow?$secondaryHeaderScroller.outerHeight():0)),viewportH=$viewport.innerHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),setCanvasWidth(e),self.onResizeCanvas&&self.onResizeCanvas({viewport:$viewport,container:$container,width:e,height:t}),updateRowCount(),render()}function resizeAndRender(){options.forceFitColumns?autosizeColumns():resizeCanvas();var e=$(window).width()-($container.parent().offset().left+$container.parent().width());e=e>=windowInitialOffset?windowInitialOffset:e}function updateRowCount(){var e=gridDataGetLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0),t=h,o=options.enableAddRow?gridDataGetLength():gridDataGetLength()-1;for(var r in rowsCache)r>=o&&removeRowFromCache(r);th=Math.max(options.rowHeight*e,viewportH-scrollbarDimensions.height),maxSupportedCssHeight>th?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1));var i=$canvas.height();h!==t&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var l=th-viewportH>=scrollTop+offset;0==th||0==scrollTop?page=offset=0:scrollTo(l?scrollTop+offset:th-viewportH),h!=t&&options.autoHeight?resizeCanvas():options.rowHeight*e<i&&options.autoHeight&&resizeCanvas()}function getVisibleRange(e){return null==e&&(e=scrollTop),{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(e){var t=getVisibleRange(e),o=Math.round(viewportH/options.rowHeight),n=3;return-1==scrollDir?(t.top-=o,t.bottom+=n):1==scrollDir?(t.top-=n,t.bottom+=o):(t.top-=n,t.bottom+=n),t.top=Math.max(0,t.top),t.bottom=Math.min(options.enableAddRow?gridDataGetLength():gridDataGetLength()-1,t.bottom),t}function renderRows(e){var t,o,n=$canvas[0],r=renderedRows,i=[],l=[],s=new Date,a=!1;for(t=e.top;t<=e.bottom;t++)rowsCache[t]||(renderedRows++,l.push(t),appendRowHtml(i,t),currentCellNode&&currentRow===t&&(a=!0),counter_rows_rendered++);var d=document.createElement("div");for(d.innerHTML=i.join(""),t=0,o=d.childNodes.length;o>t;t++)rowsCache[l[t]]=n.appendChild(d.firstChild);a&&(currentCellNode=$(rowsCache[currentRow]).children().eq(currentCell)[0],setSelectedCell(currentCellNode,!1)),renderedRows-r>5&&(avgRowRenderTime=(new Date-s)/(renderedRows-r))}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].style.top=e*options.rowHeight-offset+"px"}function render(){var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(options.enableAddRow?gridDataGetLength():gridDataGetLength()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var e=$viewport[0].scrollLeft,t=Math.abs(scrollTop-prevScrollTop);if(e!==prevScrollLeft&&(prevScrollLeft=e,$headerScroller[0].scrollLeft=e,$secondaryHeaderScroller[0].scrollLeft=e),t){if(scrollDir=scrollTop>prevScrollTop?1:-1,prevScrollTop=scrollTop,viewportH>t)scrollTo(scrollTop+offset);else{var o=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),o!=offset&&removeAllRows()}h_render&&clearTimeout(h_render),Math.abs(lastRenderedScrollTop-scrollTop)<viewportH?render():h_render=setTimeout(render,50),self.onViewportChanged&&self.onViewportChanged()}}function asyncPostProcessRows(){for(;postProcessToRow>=postProcessFromRow;){var e=scrollDir>=0?postProcessFromRow++:postProcessToRow--,t=rowsCache[e];if(!(!t||postProcessedRows[e]||e>=gridDataGetLength())){for(var o=gridDataGetItem(e),n=t.childNodes,r=0,i=0,l=columns.length;l>r;++r){var s=columns[r];s.asyncPostRender&&s.asyncPostRender(n[i],postProcessFromRow,o,s),++i}return postProcessedRows[e]=!0,void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function setHighlightedCells(e){var t,o,n,r;for(var i in rowsCache)for(t=0;t<columns.length;t++)r=highlightedCells&&highlightedCells[i]&&highlightedCells[i][columns[t].id],n=e&&e[i]&&e[i][columns[t].id],r!=n&&(o=$(rowsCache[i]).children().eq(t),o.length&&o.toggleClass(options.cellHighlightCssClass));highlightedCells=e}function flashCell(e,t,o){function n(e){e&&setTimeout(function(){r.queue(function(){r.toggleClass(options.cellFlashingCssClass).dequeue(),n(e-1)})},o)}if(o=o||100,rowsCache[e]){var r=$(rowsCache[e]).children().eq(t);n(4)}}function getSiblingIndex(e){for(var t=0;e&&e.previousSibling;)t++,e=e.previousSibling;return t}function handleKeyDown(e){var t=self.onKeyDown&&!options.editorLock.isActive()&&self.onKeyDown(e,currentRow,currentCell);if(!t)if(e.shiftKey||e.altKey||e.ctrlKey){if(9!=e.which||!e.shiftKey||e.ctrlKey||e.altKey)return;navigatePrev()}else if(27==e.which){if(!options.editorLock.isActive())return;cancelEditAndSetFocus()}else if(37==e.which)navigateLeft();else if(39==e.which)navigateRight();else if(38==e.which)navigateUp();else if(40==e.which)navigateDown();else if(9==e.which)setTimeout(makeSelectedCellEditable,options.asyncEditorLoadDelay),navigateNext();else{if(13!=e.which)return;options.editable&&(currentEditor?currentRow===defaultGetLength()?navigateDown():commitEditAndSetFocus():options.editorLock.commitCurrentEdit()&&makeSelectedCellEditable())}e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(o){}currentCellNode.focus()}function handleClick(e){if(e.ctrlKey&&"a"==e.target.tagName.toLowerCase())return!0;var t=$(e.target).closest(".slick-cell",$canvas);if(0!==t.length&&(currentCellNode!==t[0]||null===currentEditor)){var o=parseInt(t.parent().attr("row"),10),n=getSiblingIndex(t[0]),r=null,i=columns[n],l=gridDataGetItem(o);if(l&&("selectAndMove"===i.behavior||"select"===i.behavior||e.ctrlKey||e.shiftKey)&&(r=options.editorLock.commitCurrentEdit())){var s=getSelectedRows(),a=$.inArray(o,s);if(e.ctrlKey||e.shiftKey){if(-1===a&&e.ctrlKey)s.push(o);else if(-1!==a&&e.ctrlKey)s=$.grep(s,function(e,t){return e!==o});else if(s.length&&e.shiftKey){var d=s.pop(),c=Math.min(o,d),u=Math.max(o,d);s=[];for(var h=c;u>=h;h++)h!==d&&s.push(h);s.push(d)}}else s=[o];return resetCurrentCell(),setSelectedRows(s),self.onSelectedRowsChanged&&self.onSelectedRowsChanged(),$.browser.msie||$canvas[0].focus(),!1}return null!==currentEditor&&currentEditor.handleClick&&currentEditor.handleClick(e,o,n),l&&self.onClick&&(r=options.editorLock.commitCurrentEdit(),r&&self.onClick(e,o,n))?(e.stopPropagation(),e.preventDefault(),!1):void(options.enableCellNavigation&&!columns[n].unselectable&&(r===!0||null===r&&options.editorLock.commitCurrentEdit())&&(scrollRowIntoView(o,!1),setSelectedCellAndRow(t[0],o===defaultGetLength()||options.autoEdit||isCellPotentiallyEditable(o,n))))}}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);if(0!==t.length&&(currentCellNode!==t[0]||null===currentEditor)){var o=parseInt(t.parent().attr("row"),10),n=getSiblingIndex(t[0]),r=null;return gridDataGetItem(o)&&self.onContextMenu&&(r=options.editorLock.commitCurrentEdit(),r&&self.onContextMenu(e,o,n))?(e.stopPropagation(),e.preventDefault(),!1):void 0}}function handleDblClick(e){var t=$(e.target).closest(".slick-cell",$canvas);if(0!==t.length&&(currentCellNode!==t[0]||null===currentEditor)){var o=parseInt(t.parent().attr("row"),10),n=getSiblingIndex(t[0]),r=null;return gridDataGetItem(o)&&self.onDblClick&&(r=options.editorLock.commitCurrentEdit(),r&&self.onDblClick(e,o,n))?(e.stopPropagation(),e.preventDefault(),!1):void(options.editable&&gotoCell(o,n,!0))}}function handleHeaderContextMenu(e){if(self.onHeaderContextMenu&&options.editorLock.commitCurrentEdit()){e.preventDefault();var t=$(e.target).closest(".slick-header-column",".slick-header-columns");self.onHeaderContextMenu(e,columns[self.getColumnIndex(t.data("fieldId"))])}}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column");if(0!=t.length){var o=columns[getSiblingIndex(t[0])];self.onHeaderClick&&options.editorLock.commitCurrentEdit()&&self.onHeaderClick(e,o)}}function handleHover(e){if(options.enableAutoTooltips){var t=$(e.target).closest(".slick-cell",$canvas);if(t.length)if(t.innerWidth()<t[0].scrollWidth){var o=$.trim(t.text());t.attr("title",options.toolTipMaxLength&&o.length>options.toolTipMaxLength?o.substr(0,options.toolTipMaxLength-3)+"...":o)}else t.attr("title","")}}function cellExists(e,t){return!(0>e||e>=gridDataGetLength()||0>t||t>=columns.length)}function getCellFromCoords(e,t){return $($(rowsCache[e]).children().eq(t))}function getCellFromPoint(e,t){for(var o=Math.floor((t+offset)/options.rowHeight),n=0,r=0,i=0;i<columns.length&&e>r;i++)r+=columns[i].width,n++;return{row:o,cell:n-1}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;for(var o=e*options.rowHeight-offset,n=o+options.rowHeight-1,r=0,i=0;t>i;i++)r+=columns[i].width;var l=r+columns[t].width;return{top:o,left:r,bottom:n,right:l}}function resetCurrentCell(){setSelectedCell(null,!1)}function focusOnCurrentCell(){if($(currentCellNode).attr("tabIndex",0).attr("hideFocus",!0),$.browser.msie&&parseInt($.browser.version)<8){currentCellNode.setActive();var e=$(currentCellNode).position().left,t=e+$(currentCellNode).outerWidth(),o=$viewport.scrollLeft(),n=o+$viewport.width();o>e?$viewport.scrollLeft(e):t>n&&$viewport.scrollLeft(Math.min(e,t-$viewport[0].clientWidth))}else currentCellNode.focus()}function setSelectedCell(e,t){null!==currentCellNode&&(makeSelectedCellNormal(),$(currentCellNode).removeClass("selected"),$(currentCellNode).removeAttr("hidefocus"),$(currentCellNode).removeAttr("tabindex")),currentCellNode=e,null!=currentCellNode?(currentRow=parseInt($(currentCellNode).parent().attr("row"),10),currentCell=getSiblingIndex(currentCellNode),$(currentCellNode).addClass("selected"),options.editable&&t&&isCellPotentiallyEditable(currentRow,currentCell)?(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(makeSelectedCellEditable,options.asyncEditorLoadDelay):makeSelectedCellEditable()):focusOnCurrentCell(),self.onCurrentCellChanged&&self.onCurrentCellChanged(getCurrentCell())):(currentRow=null,currentCell=null)}function setSelectedCellAndRow(e,t){setSelectedCell(e,t),setSelectedRows(e?[currentRow]:[]),self.onSelectedRowsChanged&&self.onSelectedRowsChanged()}function clearTextSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function isCellPotentiallyEditable(e,t){return e<gridDataGetLength()&&!gridDataGetItem(e)?!1:columns[t].cannotTriggerInsert&&e>=gridDataGetLength()?!1:getEditor(columns[t])?!0:!1}function makeSelectedCellNormal(){if(currentEditor){if(self.onBeforeCellEditorDestroy&&self.onBeforeCellEditorDestroy(currentEditor),currentEditor.destroy(),currentEditor=null,currentCellNode&&($(currentCellNode).removeClass("editable invalid"),gridDataGetItem(currentRow))){var e=columns[currentCell];currentCellNode.innerHTML=getFormatter(e)(currentRow,currentCell,gridDataGetItem(currentRow)[e.field],e,gridDataGetItem(currentRow)),invalidatePostProcessingResults(currentRow)}$.browser.msie&&clearTextSelection(),options.editorLock.deactivate(editController)}}function makeSelectedCellEditable(){if(currentCellNode){if(!options.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(currentRow,currentCell)){if(self.onBeforeEditCell&&self.onBeforeEditCell(currentRow,currentCell,gridDataGetItem(currentRow))===!1)return void focusOnCurrentCell();options.editorLock.activate(editController),$(currentCellNode).addClass("editable"),currentCellNode.innerHTML="";var e=columns[currentCell],t=gridDataGetItem(currentRow);currentEditor=new(getEditor(e))({grid:self,gridPosition:absBox($container[0]),position:absBox(currentCellNode),container:currentCellNode,column:e,item:t||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),t&&currentEditor.loadValue(t),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleCurrentCellPositionChange()}}}function commitEditAndSetFocus(){options.editorLock.commitCurrentEdit()&&(focusOnCurrentCell(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){options.editorLock.cancelCurrentEdit()&&focusOnCurrentCell()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;for(var o=e.offsetParent;(e=e.parentNode)!=document.body;)t.visible&&e.scrollHeight!=e.offsetHeight&&"visible"!=$(e).css("overflowY")&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&"visible"!=$(e).css("overflowX")&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===o&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,o=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getCurrentCellPosition(){return absBox(currentCellNode)}function getGridPosition(){return absBox($container[0])}function handleCurrentCellPositionChange(){if(currentCellNode){var e;self.onCurrentCellPositionChanged&&(e=getCurrentCellPosition(),self.onCurrentCellPositionChanged(e)),currentEditor&&(e=e||getCurrentCellPosition(),currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e))}}function getCellEditor(){return currentEditor}function getCurrentCell(){return currentCellNode?{row:currentRow,cell:currentCell}:null}function getCurrentCellNode(){return currentCellNode}function scrollRowIntoView(e,t){var o=e*options.rowHeight,n=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?o:n),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?n:o),render())}function gotoDir(e,t,o){function n(){return!columns[getSiblingIndex(this)].unselectable}if(currentCellNode&&options.enableCellNavigation&&options.editorLock.commitCurrentEdit()){var r=rowsCache[currentRow+e],i=r&&currentCell+t>=0?$(r).children().eq(currentCell+t).filter(n):null;if(i&&!i.length){var l=$(r).children().filter(function(e){return t>0?e>currentCell+t:currentCell+t>e}).filter(n);l&&l.length&&(i=t>0?l.eq(0):l.eq(l.length-1))}if(o&&0===e&&!(r&&i&&i.length)&&(!i||!i.length)){r=rowsCache[currentRow+e+(t>0?1:-1)];var l=$(r).children().filter(n);i=t>0?r?l.eq(0):null:r?l.eq(l.length-1):null}if(r&&i&&i.length){var s=parseInt($(r).attr("row"),10),a=s==defaultGetLength();scrollRowIntoView(s,!a),setSelectedCellAndRow(i[0],a||options.autoEdit),currentEditor||focusOnCurrentCell()}else focusOnCurrentCell()}}function gotoCell(e,t,o){if(!(e>gridDataGetLength()||0>e||t>=columns.length||0>t)&&options.enableCellNavigation&&!columns[t].unselectable&&options.editorLock.commitCurrentEdit()){scrollRowIntoView(e,!1);var n=null;columns[t].unselectable||(n=$(rowsCache[e]).children().eq(t)[0]),setSelectedCellAndRow(n,o||e===gridDataGetLength()||options.autoEdit),currentEditor||focusOnCurrentCell()}}function navigateUp(){gotoDir(-1,0,!1)}function navigateDown(){gotoDir(1,0,!1)}function navigateLeft(){gotoDir(0,-1,!1)}function navigateRight(){gotoDir(0,1,!1)}function navigatePrev(){gotoDir(0,-1,!0)}function navigateNext(){gotoDir(0,1,!0)}function commitCurrentEdit(){var e=gridDataGetItem(currentRow),t=columns[currentCell];if(currentEditor){if(currentEditor.isValueChanged()){var o=currentEditor.validate();if(o.valid){if(currentRow<gridDataGetLength()){var n={row:currentRow,cell:currentCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeSelectedCellNormal(),options.editCommandHandler(e,t,n)):(n.execute(),makeSelectedCellNormal()),self.onCellChange&&self.onCellChange(currentRow,currentCell,e)}else if(self.onAddNewRow){var r={};currentEditor.applyValue(r,currentEditor.serializeValue()),makeSelectedCellNormal(),self.onAddNewRow(r,t)}return!options.editorLock.isActive()}return $(currentCellNode).addClass("invalid"),$(currentCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),self.onValidationError&&self.onValidationError(currentCellNode,o,currentRow,currentCell,t),currentEditor.focus(),!1}makeSelectedCellNormal()}return!0}function cancelCurrentEdit(){return makeSelectedCellNormal(),!0}var defaults={rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableCellRangeSelection:!1,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:!1,secondaryHeaderRowHeight:25,syncColumnCellResize:!1,enableAutoTooltips:!0,toolTipMaxLength:null,formatterFactory:null,editorFactory:null,cellHighlightCssClass:"highlighted",cellFlashingCssClass:"flashing"},gridData,gridDataGetLength,gridDataGetItem,columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30},maxSupportedCssHeight,th,h,ph,n,cj,page=0,offset=0,scrollDir=1,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$headerScroller,$headers,$secondaryHeaderScroller,$secondaryHeaders,$viewport,$canvas,$style,stylesheet,viewportH,viewportW,viewportHasHScroll,headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff,absoluteColumnMinWidth,windowInitialOffset,currentRow,currentCell,currentCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,prevScrollLeft=0,avgRowRenderTime=10,selectedRows=[],selectedRowsLookup={},columnsById={},highlightedCells,sortColumnId,sortAsc=!0,h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nscrollDir:  "+scrollDir,alert(e)},this.eval=function(expr){return eval(expr)},init(),$.extend(this,{slickGridVersion:"1.4",onSort:null,onHeaderContextMenu:null,onClick:null,onDblClick:null,onContextMenu:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,onColumnsResized:null,onColumnsSelected:null,onBeforeMoveRows:null,onMoveRows:null,onCellChange:null,onBeforeEditCell:null,onBeforeCellEditorDestroy:null,onBeforeDestroy:null,onCurrentCellChanged:null,onCurrentCellPositionChanged:null,onCellRangeSelected:null,onResizeCanvas:null,getColumns:getColumns,setColumns:setColumns,getOption:getOption,getOptions:getOptions,setOptions:setOptions,setData:setData,destroy:destroy,getColumnIndex:getColumnIndex,autosizeColumns:autosizeColumns,updateCell:updateCell,updateRow:updateRow,removeRow:removeRow,removeRows:removeRows,removeAllRows:removeAllRows,render:render,invalidate:invalidate,setHighlightedCells:setHighlightedCells,flashCell:flashCell,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,getCellFromCoords:getCellFromCoords,getCellFromPoint:getCellFromPoint,getCurrentCell:getCurrentCell,getCurrentCellNode:getCurrentCellNode,resetCurrentCell:resetCurrentCell,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,editCurrentCell:makeSelectedCellEditable,getCellEditor:getCellEditor,scrollRowIntoView:scrollRowIntoView,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getSecondaryHeaderRow:getSecondaryHeaderRow,showSecondaryHeaderRow:showSecondaryHeaderRow,hideSecondaryHeaderRow:hideSecondaryHeaderRow,setSortColumn:setSortColumn,getSortInfo:getSortInfo,getCurrentCellPosition:getCurrentCellPosition,getGridPosition:getGridPosition,getEditController:getEditController})}var scrollbarDimensions;$.extend(!0,window,{Slick:{Grid:SlickGrid,EditorLock:EditorLock,GlobalEditorLock:new EditorLock}})}(jQuery),undefinedundefined;